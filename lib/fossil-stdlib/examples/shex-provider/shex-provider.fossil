const ROOT = "lib/fossil-stdlib/examples/shex-provider"

type PersonData = csv!("${ROOT}/people.csv")
type Person = shex!("${ROOT}/person.shex", shape: "PersonShape")

impl ToString for PersonData {
    to_string = fn(self) -> "PersonData"
}

let csv_to_rdf = fn(row) -> {
    Person(row.name, row.age, row.name)
        |> Entity::with_id("http://example.com/person/${row.name}")
}

PersonData::load()
|> List::map(csv_to_rdf)
|> Rdf::serialize("${ROOT}/results.ttl")
